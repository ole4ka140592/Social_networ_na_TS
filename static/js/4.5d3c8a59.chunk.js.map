{"version":3,"sources":["components/Dialogs/Dialogs.module.css","components/Dialogs/Message/Message.tsx","components/Dialogs/DialogItem/DialogItem.tsx","components/Dialogs/Dialogs.tsx","hoc/withAuthRedirect.tsx","components/Dialogs/DialogsContainer.tsx"],"names":["module","exports","Message","props","className","classes","message","DialogItem","dialog","active","to","id","name","maxLength50","maxLengthCreator","AddMessageFormRedux","reduxForm","form","onSubmit","handleSubmit","Field","component","Textarea","validate","required","placeholder","mapStateToProps","state","isAuth","auth","compose","connect","dialogsPage","dispatch","sendMessage","newMessageBody","sendMessageAC","Component","RedirectComponent","this","React","messagesElements","messages","map","m","dialogsElements","dialogs","d","dialogsItems","values","newMassageBody"],"mappings":"2FACAA,EAAOC,QAAU,CAAC,QAAU,yBAAyB,aAAe,8BAA8B,OAAS,wBAAwB,SAAW,0BAA0B,QAAU,2B,8FCOrKC,EAAU,SAACC,GACpB,OACI,qBAAKC,UAAWC,IAAQC,QAAxB,SAAkCH,EAAMG,W,QCDnCC,EAAa,SAACJ,GACvB,OACI,qBAAKC,UAAWC,IAAQG,OAAS,IAAMH,IAAQI,OAA/C,SACI,cAAC,IAAD,CAASC,GAAI,YAAcP,EAAMQ,GAAjC,SAAsCR,EAAMS,U,yCCwCjDC,EAAcC,YAAiB,IAmBhCC,EAAsBC,YAAkC,CAACC,KAAM,wBAAzCD,EAjBgD,SAACb,GACzE,OACI,uBAAMe,SAAUf,EAAMgB,aAAtB,UACI,8BACI,cAACC,EAAA,EAAD,CAAQC,UAAWC,IACXC,SAAU,CAACC,IAAUX,GACrBD,KAAM,iBACNa,YAAa,yBAGzB,8BACI,kD,sDCvDVC,EAAkB,SAACC,GAAD,MAA+C,CAC/DC,OAAQD,EAAME,KAAKD,SC2BZE,sBACXC,aApBkB,SAACJ,GACnB,MAAO,CACHC,OAAQD,EAAME,KAAKD,OACnBI,YAAaL,EAAMK,gBAIF,SAACC,GAEtB,MAAO,CACHC,YAAa,SAACC,GACVF,EAASG,YAAcD,UDd5B,SAA6BE,GAAgB,IAW1CC,EAX0C,4JAYhD,WACI,OAAKC,KAAKpC,MAAMyB,OACT,cAACS,EAAD,eAAeE,KAAKpC,QADI,cAAC,IAAD,CAAUO,GAAI,eAbD,GAWhB8B,IAAMH,WAStC,OADiCN,YAAQL,EAAiB,KAAzBK,CAA+BO,KCGrDR,EFjBQ,SAAC3B,GAEpB,IAAIsC,EAAmBtC,EAAM6B,YAAYU,SAASC,KAAI,SAAAC,GAAC,OAAI,cAAC,EAAD,CAAoBtC,QAASsC,EAAEtC,SAAjBsC,EAAEjC,OAEvEkC,EAAkB1C,EAAM6B,YAAYc,QAAQH,KAAI,SAAAI,GAAC,OAAI,cAAC,EAAD,CAAuBpC,GAAIoC,EAAEpC,GAAIC,KAAMmC,EAAEnC,MAAxBmC,EAAEpC,OAM5E,OAAKR,EAAMyB,OAGP,sBAAKxB,UAAWC,IAAQyC,QAAxB,UAEI,qBAAK1C,UAAWC,IAAQ2C,aAAxB,SACKH,IAEL,sBAAKzC,UAAWC,IAAQqC,SAAxB,UACI,8BAAMD,IACN,cAAC1B,EAAD,CAAqBG,SAdX,SAAC+B,GACnB9C,EAAM+B,YAAYe,EAAOC,yBAGF,cAAC,IAAD,CAAUxC,GAAI","file":"static/js/4.5d3c8a59.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__5fMls\",\"dialogsItems\":\"Dialogs_dialogsItems__3tj5J\",\"active\":\"Dialogs_active__2o91P\",\"messages\":\"Dialogs_messages__vZYq6\",\"message\":\"Dialogs_message__aktBS\"};","import React from \"react\";\r\nimport classes from './../Dialogs.module.css'\r\n\r\n\r\ntype MessagePropsType = {\r\n    message: string\r\n}\r\n\r\nexport const Message = (props: MessagePropsType) => {\r\n    return (\r\n        <div className={classes.message}>{props.message}</div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport classes from './../Dialogs.module.css'\r\n\r\ntype DialogPropsType = {\r\n    name: string\r\n    id: number\r\n}\r\n\r\nexport const DialogItem = (props: DialogPropsType) => {\r\n    return (\r\n        <div className={classes.dialog + ' ' + classes.active}>\r\n            <NavLink to={'/dialogs/' + props.id}>{props.name}</NavLink>\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport classes from './Dialogs.module.css'\r\nimport {Message} from \"./Message/Message\";\r\nimport {DialogItem} from \"./DialogItem/DialogItem\";\r\nimport {DialogsPageStateType} from \"../../redux/dialogsReducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {reduxForm, Field, InjectedFormProps} from \"redux-form\";\r\nimport {Textarea} from \"../common/FormsControls/FormControls\";\r\nimport {maxLengthCreator, required} from \"../../utils/validators/validators\";\r\nimport {OwnPropsType} from \"./DialogsContainer\";\r\nimport {Preloader} from \"../common/Preloader/Preloader\";\r\n\r\n\r\n\r\n// type PropsDialogsType = {\r\n//     dialogsPage: DialogsPageStateType\r\n//     sendMessage: (newMessageBody: string)=> void\r\n//     updateNewMessageBody: (body: string)=> void\r\n//     isAuth: boolean\r\n// }\r\n\r\nexport const Dialogs = (props: OwnPropsType) => {\r\n\r\n    let messagesElements = props.dialogsPage.messages.map(m => <Message key={m.id} message={m.message}/>)\r\n\r\n    let dialogsElements = props.dialogsPage.dialogs.map(d => <DialogItem key={d.id} id={d.id} name={d.name}/>)\r\n\r\n    const addNewMessage = (values: FormDataAddMessageType) => {\r\n        props.sendMessage(values.newMassageBody)\r\n    }\r\n\r\n    if (!props.isAuth) {return <Redirect to={\"/login\"}/>}\r\n\r\n    return (\r\n        <div className={classes.dialogs}>\r\n\r\n            <div className={classes.dialogsItems}>\r\n                {dialogsElements}\r\n            </div>\r\n            <div className={classes.messages}>\r\n                <div>{messagesElements}</div>\r\n                <AddMessageFormRedux onSubmit={addNewMessage}/>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\ntype FormDataAddMessageType = {\r\n    newMassageBody: string\r\n}\r\n\r\nconst  maxLength50 = maxLengthCreator(50)\r\n\r\nconst AddMessageForm: React.FC<InjectedFormProps<FormDataAddMessageType>> = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field  component={Textarea}\r\n                        validate={[required, maxLength50]}\r\n                        name={\"newMassageBody\"}\r\n                        placeholder={\"Enter your message\"}\r\n                />\r\n            </div>\r\n            <div>\r\n                <button>Send</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst AddMessageFormRedux = reduxForm<FormDataAddMessageType>({form: \"dialogAddMessageForm\"})(AddMessageForm)","import {Redirect} from \"react-router-dom\";\r\nimport React, {ComponentType} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../redux/reduxStore\";\r\nimport {ReactComponent} from \"*.svg\";\r\n\r\ntype MapStateToPropsType = {\r\n    isAuth: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => ({\r\n        isAuth: state.auth.isAuth\r\n})\r\n\r\ntype OwnType = ComponentType & MapStateToPropsType\r\n\r\nexport function withAuthRedirect<T>(Component: any) {\r\n// debugger\r\n//     const RedirectComponent = (props: MapStateToPropsType) => {\r\n//         let {isAuth, ...restProps} = props\r\n// debugger\r\n//         if (!isAuth) {return <Redirect to={\"/login\"}/>}\r\n//\r\n//         return <Component {...restProps as T}/>\r\n//         debugger\r\n//     }\r\n\r\n    class RedirectComponent extends React.Component<OwnType> {\r\n    render() {\r\n        if (!this.props.isAuth) return <Redirect to={\"/login\"}/>\r\n        return <Component {...this.props}/>\r\n    }\r\n\r\n    }\r\ndebugger\r\n    let ConnectedRedirectComponent = connect(mapStateToProps, null)(RedirectComponent)\r\n    return ConnectedRedirectComponent\r\n}\r\n","import React from \"react\";\r\nimport {DialogsPageStateType, sendMessageAC} from \"../../redux/dialogsReducer\";\r\nimport {Dialogs} from \"./Dialogs\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/reduxStore\";\r\nimport {compose, Dispatch} from \"redux\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\ntype MapStateToProps = {\r\n    isAuth: boolean\r\n    dialogsPage: DialogsPageStateType\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    sendMessage: (newMessageBody: string)=> void\r\n}\r\n\r\nexport type OwnPropsType = MapDispatchToPropsType & MapStateToProps\r\nlet mapStateToProps = (state: AppStateType): MapStateToProps => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        dialogsPage: state.dialogsPage\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch: Dispatch): MapDispatchToPropsType => {\r\n    debugger\r\n    return {\r\n        sendMessage: (newMessageBody: string) => {\r\n            dispatch(sendMessageAC(newMessageBody))\r\n        },\r\n        // updateNewMessageBody: (body: string) => {\r\n        //     dispatch(updateNewMessageBodyAC(body))\r\n        // }\r\n    }\r\n}\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect<MapStateToProps,MapDispatchToPropsType,{},AppStateType>(mapStateToProps, mapDispatchToProps),\r\n    withAuthRedirect)(Dialogs)\r\n\r\n\r\n// let AuthRedirectComponent = withAuthRedirect(Dialogs)\r\n//// export const DialogsContainer = connect(mapStateToProps, mapDispatchToProps)(AuthRedirectComponent)"],"sourceRoot":""}